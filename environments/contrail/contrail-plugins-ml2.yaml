
resource_registry:
  OS::TripleO::Services::NeutronCorePlugin: ../../docker/services/contrail/contrail-neutron-ml2-plugin.yaml
  OS::TripleO::ControllerExtraConfigPre: ../../extraconfig/pre_deploy/contrail/contrail-node-init.yaml
  OS::TripleO::Controller::NodeUserData: ../../firstboot/contrail/contrail_container_registry.yaml

parameter_defaults:
  # Neutron config options
  # core_plugin
  NeutronCorePlugin: 'ml2'
  # service_plugins
  # NeutronServicePlugins: 'opencontrail-router'  
  NeutronServicePlugins: 'neutron.services.l3_router.l3_router_plugin.L3RouterPlugin'
  NeutronServiceProviders: ['L3_ROUTER_NAT:TF:networking_opencontrail.l3.service_provider.TFL3ServiceProvider']

  # Neutron ML2 config options
  # ml2/ml2_conf.ini: mechanism_drivers
  NeutronMechanismDrivers: 'opencontrail,openvswitch'
  # ml2/ml2_conf.ini: type_drivers
  NeutronTypeDrivers: 'local,vlan,gre,vxlan'
  # ml2/ml2_conf.ini: tenant_network_types
  NeutronNetworkType: 'local,vlan'

  # The tunnel type for the tenant network (vxlan or gre). Set to '' to disable tunneling.
  # ml2/openvswitch_agent.ini: tunnel_types
  NeutronTunnelTypes: 'vxlan'


  NeutronApiOptVolumes:
    - 'opt_plugin:/opt/plugin'
  NeutronApiOptEnvVars:
    - 'PYTHONPATH=/opt/plugin/site-packages:/usr/lib/python2.7/site-packages'

  install_contrail_puppet: true
  
  OvercloudControllerFlavor: 'control'
  OvercloudComputeFlavor: 'compute'

  ControllerCount: 1
  ComputeCount: 1

  ContrailRegistry: 'satellite.englab.juniper.net:5443'
  ContrailImageTag: 'queens-5.0-104-rhel-queens'

  # Address of Contrail Config API in format: ip1,ip2
  ContrailConfigIPs: ''
  ContrailConfigPort: '8082'

  # Enable/Disable Device Manager integration
  ContrailDmIntegration: false

  # Contrail controller use keyston for auth
  # it needs admin endpoint on same network as intenral endpoint
  ServiceNetMap:
    KeystoneAdminApiNetwork: internal_api